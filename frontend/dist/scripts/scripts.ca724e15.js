(function(){"use strict";angular.module("iterativeLearningApp",["ui.router"]).config(["$stateProvider",function(a){return a.state("task",{url:"/task?key&assignmentId&hitId&workerId&turkSubmitTo",controller:"MainCtrl",templateUrl:"views/main.html"}),a.state("experiment",{url:"/experiment?key",controller:"ExperimentCtrl",templateUrl:"views/experiment.html"})}]).constant("ilHost","")}).call(this),function(){"use strict";angular.module("iterativeLearningApp").controller("MainCtrl",["$scope","$http","$stateParams","ilHost",function(a,b,c,d){var e,f,g,h,i,j;return j=null,i={initial:1,training:2,testing:3,complete:4},e=i.training,a.step=0,a.show_feedback=!1,h={training:[],testing:[]},a.active_response=null,b.get(d+("/task?key="+c.key)).then(function(a){var b,c,d,e,f,g,i,k;for(j=a.data,g=j._start_values.training,c=0,e=g.length;e>c;c++)b=g[c],h.training.push({x:b.x,y:null,time:null});for(i=j._start_values.testing,k=[],d=0,f=i.length;f>d;d++)b=i[d],k.push(h.testing.push({x:b.x,y:null,time:null}));return k},function(a){return console.log(a)}),a.x=function(){try{return j._start_values[a.state_name()][a.step].x}catch(b){return null}},a.y=function(){try{return j._start_values[a.state_name()][a.step].y}catch(b){return null}},g=function(a,b,c){return h[b][c].time=(new Date).getTime(),h[b][c].y=a},f=function(b){return null==b&&(b=5),null===a.active_response?!1:Math.abs(a.active_response-a.y())<=b},a.state_name=function(){var a,b,c,d;for(d=Object.keys(i),b=0,c=d.length;c>b;b++)if(a=d[b],e===i[a])return a},a.status_message=function(){var b;b=a.state_name();try{return""+b+": step "+(a.step+1)+" of "+j._start_values[b].length+" "}catch(c){return""}},a.next=function(){if(e===i.initial)return e=i.training,a.active_response=null;if(e===i.training){if(a.show_feedback||g(a.active_response,"training",a.step),f())return a.step<j._start_values.training.length-1?(a.step+=1,a.active_response=null):(a.step=0,e=i.testing),a.show_feedback=!1,a.active_response=null;if(null!==a.active_response)return a.show_feedback=!0}else{if(e===i.testing){if(null===a.active_response)return;return g(a.active_response,"testing",a.step),a.active_response=null,a.step<j._start_values.testing.length-1?a.step+=1:e=i.complete}if(e!==i.complete)throw"oh no, undefined state!"}},a.submit=function(){var a;return e===i.complete?(a={task:{response_values:h}},b.post(d+("/task?key="+c.key),a)):void 0}}])}.call(this),function(){"use strict";angular.module("iterativeLearningApp").controller("ExperimentCtrl",["$scope","$http","$stateParams","ilHost",function(a,b,c,d){return a.experiment={},b.get(d+("/experiment?key="+c.key)).then(function(b){return a.experiment=b.data},function(a){return console.log(a)})}])}.call(this),function(){"use strict";angular.module("iterativeLearningApp").directive("ilSlider",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f;return f={orientation:"vertical",range:"min",min:1,max:100},e=function(){return angular.extend(f,a.$eval(c.ilSlider)||{}),b.slider(f),e=angular.noop},b.bind("slide",function(b,c){return d.$setViewValue(c.value),a.$apply()}),d.$render=function(){return e(),b.slider("value",d.$viewValue)}}}})}.call(this);