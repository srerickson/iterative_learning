(function(){"use strict";angular.module("iterativeLearningApp",["ui.router"]).config(["$stateProvider",function(a){return a.state("task",{url:"/task?key&assignmentId&hitId&workerId&turkSubmitTo",controller:"MainCtrl",templateUrl:"views/main.html"}),a.state("experiment",{url:"/experiment?key",controller:"ExperimentCtrl",templateUrl:"views/experiment.html"})}])}).call(this),function(){"use strict";var a;a=function(a){var b,c,d,e,f;for(b=d=e=a.length-1;1>=e?1>=d:d>=1;b=1>=e?++d:--d)c=Math.floor(Math.random()*(b+1)),f=[a[c],a[b]],a[b]=f[0],a[c]=f[1];return a},angular.module("iterativeLearningApp").controller("MainCtrl",["$scope","$http","$stateParams",function(a,b,c){var d,e,f,g,h,i,j,k;return j=null,i={initial:1,training:2,feedback:3,testing:4,complete:5},d=i.training,a.step=0,h=0,a.max_steps=0,a.current_response=null,g=[],b.get("/task?key="+c.key).then(function(b){var c,d,e,f;for(j=b.data,h=j._start_values.training.length,a.max_steps=h+j._start_values.testing.length,f=[],c=d=0,e=a.max_steps-1;e>=0?e>=d:d>=e;c=e>=0?++d:--d)f.push(g.push({x:k(c).x,y:null,time:null}));return f},function(a){return console.log(a)}),k=function(a){var b,c;return j?(a<j._start_values.training.length?(b=a,c="training"):(b=a-j._start_values.training.length,c="testing"),j._start_values[c][b]):{}},a.x=function(){try{return k(a.step).x}catch(b){return null}},a.y=function(){try{return k(a.step).y}catch(b){return null}},f=function(){return g[a.step].time=(new Date).getTime(),g[a.step].y=a.current_response,a.current_response=null},e=function(){return null===a.current_response?!1:Math.abs(a.current_response-a.y())<=5},a.state_name=function(){var a,b,c,e;for(e=Object.keys(i),b=0,c=e.length;c>b;b++)if(a=e[b],d===i[a])return a},a.next=function(){return d!==i.complete?(e()?(f(),a.step+=1,d===i.feedback&&(d=i.training)):(d===i.testing&&(f(),a.step+=1),d===i.training&&(d=i.feedback)),a.step===h&&(d=i.testing),a.step===a.max_steps?d=i.complete:void 0):void 0},a.submit=function(){var a;return d===i.complete?(a={task:{response_values:g}},b.post("/task?key="+c.key,a)):void 0}}])}.call(this),function(){"use strict";angular.module("iterativeLearningApp").controller("ExperimentCtrl",["$scope","$http","$stateParams",function(a,b,c){return a.experiment={},b.get("http://localhost:3000/experiment?key="+c.key).then(function(b){return a.experiment=b.data},function(a){return console.log(a)})}])}.call(this),function(){"use strict";angular.module("iterativeLearningApp").directive("ilSlider",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f;return f={orientation:"vertical",range:"min",min:1,max:100},e=function(){return angular.extend(f,a.$eval(c.ilSlider)||{}),b.slider(f),e=angular.noop},b.bind("slide",function(b,c){return d.$setViewValue(c.value),a.$apply()}),d.$render=function(){return e(),b.slider("value",d.$viewValue)}}}})}.call(this);